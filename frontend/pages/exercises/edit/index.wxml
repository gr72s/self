<view class="page-container">
  <!-- 顶部导航栏 -->
  <navbar 
    menuOpen="{{menuOpen}}" 
    bind:toggleMenu="handleMenuToggle"
  />
  
  <!-- 主内容区 -->
  <view class="main-container">
    <!-- 页面头部 -->
    <view class="page-header">
      <text class="page-title">Edit Exercise</text>
    </view>

    <!-- 表单 -->
    <form class="exercise-form" bindsubmit="handleSubmit">
      <!-- 基本信息 -->
      <view class="form-section">
        <text class="section-title">Basic Information</text>
        <view class="form-item">
          <text class="form-label">Name *</text>
          <input class="form-input" placeholder="Enter exercise name" value="{{name}}" bindinput="handleNameChange" />
        </view>
        <view class="form-item">
          <text class="form-label">Origin Name (Optional)</text>
          <input class="form-input" placeholder="Enter origin name" value="{{originName}}" bindinput="handleOriginNameChange" />
        </view>
        <view class="form-item">
          <text class="form-label">Description (Optional)</text>
          <textarea class="form-textarea" placeholder="Enter exercise description" value="{{description}}" bindinput="handleDescriptionChange" />
        </view>
      </view>

      <!-- 肌肉选择 -->
      <view class="form-section">
        <text class="section-title">Muscles</text>
        <view class="form-item">
          <text class="form-label">Main Muscles</text>
          <view class="muscles-container">
            <view wx:for="{{muscles}}" wx:key="{{item.id}}" class="muscle-item" bindtap="toggleMainMuscle" data-id="{{item.id}}">
              <view class="muscle-checkbox {{selectedMainMuscles.includes(item.id) ? 'checked' : ''}}">
                <text wx:if="{{selectedMainMuscles.includes(item.id)}}" class="checkbox-icon">✓</text>
              </view>
              <text class="muscle-name">{{item.name}}</text>
            </view>
          </view>
        </view>
        <view class="form-item">
          <text class="form-label">Support Muscles</text>
          <view class="muscles-container">
            <view wx:for="{{muscles}}" wx:key="{{item.id}}" class="muscle-item" bindtap="toggleSupportMuscle" data-id="{{item.id}}">
              <view class="muscle-checkbox {{selectedSupportMuscles.includes(item.id) ? 'checked' : ''}}">
                <text wx:if="{{selectedSupportMuscles.includes(item.id)}}" class="checkbox-icon">✓</text>
              </view>
              <text class="muscle-name">{{item.name}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- 动作提示 -->
      <view class="form-section">
        <text class="section-title">Cues</text>
        <view class="form-item">
          <text class="form-label">Add Cues</text>
          <view class="cues-container">
            <view wx:for="{{cues}}" wx:key="{{index}}" class="cue-item">
              <input class="cue-input" placeholder="Enter cue" value="{{item}}" bindinput="handleCueChange" data-index="{{index}}" />
              <button class="remove-cue-button" bindtap="removeCue" data-index="{{index}}">-</button>
            </view>
            <button class="add-cue-button" bindtap="addCue">+ Add Cue</button>
          </view>
        </view>
      </view>

      <!-- 提交按钮 -->
      <view class="form-actions">
        <button class="cancel-button" bindtap="navigateBack">Cancel</button>
        <button class="submit-button" form-type="submit" wx:if="{{!submitting}}">Update Exercise</button>
        <button class="submit-button" disabled wx:else>Updating...</button>
      </view>
    </form>
  </view>
  
  <!-- 底部工具栏 -->
  <tabbar />
</view>