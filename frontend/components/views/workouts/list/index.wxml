<view class="page-container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ -->
  
  <!-- ä¸»å†…å®¹åŒº -->
  <view class="main-container">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <view class="section-title">
      <text>è®­ç»ƒè®°å½•</text>
      <view class="toolbar-right">
        <view class="button icon-button" bindtap="handleRefresh">
          <text>ğŸ”„</text>
        </view>
        <view class="button primary" bindtap="navigateToCreate">
          <text class="button-text">+ æ–°å»º</text>
        </view>
      </view>
    </view>

    <!-- è®­ç»ƒåˆ—è¡¨ -->
    <view class="table">
      <block wx:if="{{loading}}">
        <view class="loading">
          <view class="loading-spinner"></view>
          <text>åŠ è½½ä¸­...</text>
        </view>
      </block>
      <block wx:elif="{{workouts.length === 0}}">
        <view class="empty">
          <text class="empty-icon">ğŸ‹ï¸</text>
          <text class="empty-text">æš‚æ— è®­ç»ƒè®°å½•</text>
          <text class="empty-subtext">åˆ›å»ºç¬¬ä¸€æ¡è®­ç»ƒè®°å½•å¼€å§‹ä½¿ç”¨</text>
          <view class="button primary" bindtap="navigateToCreate">
            <text class="button-text">æ–°å»ºé¦–æ¡è®­ç»ƒè®°å½•</text>
          </view>
        </view>
      </block>
      <block wx:else>
        <view class="table-header">
          <view class="table-header-cell">è®­ç»ƒ</view>
          <view class="table-header-cell">æ—¥æœŸ</view>
          <view class="table-header-cell">æ—¶é—´</view>
          <view class="table-header-cell">å¥èº«æˆ¿</view>
          <view class="table-header-cell">æ—¶é•¿</view>
          <view class="table-header-cell">çŠ¶æ€</view>
          <view class="table-header-cell" style="text-align: right;">æ“ä½œ</view>
        </view>
        <view class="table-body">
          <view wx:for="{{workouts}}" wx:key="id" class="table-row">
            <view class="table-cell">
              <text class="workout-name">{{item.routine && item.routine.name ? item.routine.name : 'æœªå‘½åè®­ç»ƒ'}}</text>
            </view>
            <view class="table-cell">
              <text>{{formatDate(item.startTime)}}</text>
            </view>
            <view class="table-cell">
              <text>{{formatTime(item.startTime)}} - {{item.endTime ? formatTime(item.endTime) : 'è¿›è¡Œä¸­'}}</text>
            </view>
            <view class="table-cell">
              <text>{{item.gym && item.gym.name ? item.gym.name : 'æœªçŸ¥å¥èº«æˆ¿'}}</text>
            </view>
            <view class="table-cell">
              <text>{{item.endTime ? calculateDuration(item.startTime, item.endTime) : '-'}}</text>
            </view>
            <view class="table-cell">
              <text class="status {{item.endTime ? 'completed' : 'in-progress'}}">
                {{item.endTime ? 'å·²å®Œæˆ' : 'è¿›è¡Œä¸­'}}
              </text>
            </view>
            <view class="table-cell" style="text-align: right;">
              <view class="table-actions">
                <view class="button icon-button" bindtap="navigateToDetail" data-id="{{item.id}}">
                  <text>ğŸ‘ï¸</text>
                </view>
                <view class="button icon-button" bindtap="navigateToEdit" data-id="{{item.id}}">
                  <text>âœï¸</text>
                </view>
                <view class="button icon-button delete" bindtap="confirmDelete" data-id="{{item.id}}">
                  <text>ğŸ—‘ï¸</text>
                </view>
              </view>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>
  
  <!-- åº•éƒ¨å·¥å…·æ -->
</view>

